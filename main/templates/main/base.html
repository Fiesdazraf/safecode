<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  {% load static %}
  <meta charset="UTF-8" />
  <title>{% block title %}سایت من{% endblock %}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="{% block meta_description %}طراحی و توسعه وب‌سایت‌های حرفه‌ای با Django توسط فرزاد سیف.{% endblock %}">
  <meta name="robots" content="index, follow" />

  <!-- OpenGraph -->
  <meta property="og:title" content="{% block og_title %}سایت من{% endblock %}">
  <meta property="og:description" content="{% block og_description %}طراحی سایت با جنگو توسط فرزاد سیف{% endblock %}">
  <meta property="og:type" content="website">
  <meta property="og:image" content="{% static 'main/images/preview.jpg' %}">
  <meta property="og:url" content="https://example.com">

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">

  <!-- Bootstrap Icons (just icons) -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" rel="stylesheet">

  <!-- Tailwind output -->
  <link rel="stylesheet" href="{% static 'main/tailwind.css' %}">
  <link rel="stylesheet" href="{% static 'main/style.css' %}?v=9">

  <!--Favicon-->
  <link rel="icon" href="{% static 'main/favicon.ico' %}" type="image/x-icon">


  {% block extra_head %}{% endblock %}
</head>
<body class="bg-white text-slate-800 antialiased flex min-h-screen flex-col">

  <!-- Header / Navbar (Tailwind) -->
  <header class="sticky top-0 z-40 border-b border-slate-200/60 bg-white/80 backdrop-blur">
    <nav class="container mx-auto max-w-screen-lg px-4">
      <div class="flex items-center justify-between py-3">
        <a href="{% url 'home' %}" class="text-xl font-extrabold text-slate-900">SafeCode</a>

        <!-- Mobile toggle -->
        <button id="nav-toggle" class="inline-flex h-10 w-10 items-center justify-center rounded-lg border border-slate-200 text-slate-700 md:hidden">
          <span class="bi bi-list text-2xl"></span>
        </button>

        <!-- Links -->
        <ul id="nav-menu" class="hidden gap-6 text-sm font-medium text-slate-700 md:flex">
          <li><a class="hover:text-indigo-600 {% if request.path == '/' %}text-indigo-600{% endif %}" href="{% url 'home' %}">خانه</a></li>
          <li><a class="hover:text-indigo-600 {% if request.path == '/portfolio/' %}text-indigo-600{% endif %}" href="{% url 'portfolio' %}">نمونه‌کارها</a></li>
          <li><a class="hover:text-indigo-600 {% if request.path == '/contact/' %}text-indigo-600{% endif %}" href="{% url 'contact' %}">تماس با من</a></li>
        </ul>
      </div>

      <!-- Mobile menu -->
      <ul id="nav-menu-mobile" class="hidden flex-col gap-2 pb-3 text-sm font-medium text-slate-700 md:hidden">
        <li><a class="block rounded-lg px-3 py-2 hover:bg-slate-50 {% if request.path == '/' %}text-indigo-600{% endif %}" href="{% url 'home' %}">خانه</a></li>
        <li><a class="block rounded-lg px-3 py-2 hover:bg-slate-50 {% if request.path == '/portfolio/' %}text-indigo-600{% endif %}" href="{% url 'portfolio' %}">نمونه‌کارها</a></li>
        <li><a class="block rounded-lg px-3 py-2 hover:bg-slate-50 {% if request.path == '/contact/' %}text-indigo-600{% endif %}" href="{% url 'contact' %}">تماس با من</a></li>
      </ul>
    </nav>
  </header>

  <!-- Main -->
  <main class="flex-1">
    <div class="container mx-auto max-w-screen-lg px-4 py-6">
      {% block content %}{% endblock %}
    </div>
  </main>

  <!-- Footer -->
  <footer class="mt-auto border-t border-slate-200/60 bg-white">
    <div class="container mx-auto max-w-screen-lg px-4 py-4 text-center text-slate-600">
      © 2025 — همه حقوق محفوظ است | طراحی توسط فرزاد سیف
    </div>
  </footer>

  <!-- Small JS for mobile menu -->
  <script>
    (function () {
      const btn = document.getElementById('nav-toggle');
      const mobile = document.getElementById('nav-menu-mobile');
      if (btn && mobile) {
        btn.addEventListener('click', () => {
          mobile.classList.toggle('hidden');
        });
      }
    })();
  </script>

  {% block extra_scripts %}{% endblock %}

  <!-- HTMX -->
<script src="https://cdn.jsdelivr.net/npm/htmx.org@2.0.6/dist/htmx.min.js"
        integrity="sha384-Akqfrbj/HpNVo8k11SXBb6TlBWmXXlYQrCSqEWmyKJe+hDm3Z/B2WVG4smwBkRVm"
        crossorigin="anonymous"></script>

<!-- CSRF header for HTMX (Django) -->
<script>
  // read csrftoken cookie
  function getCookie(name) {
    const value = `; ${document.cookie}`;
    const parts = value.split(`; ${name}=`);
    if (parts.length === 2) return parts.pop().split(';').shift();
  }
  document.body.addEventListener('htmx:configRequest', (evt) => {
    const token = getCookie('csrftoken'); // نام پیش‌فرض در Django
    if (token) evt.detail.headers['X-CSRFToken'] = token;
  });
  
</script>
</body>
</html>
